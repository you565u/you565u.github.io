import{e as r,L as x}from"./livewire.esm-BoSSBvwL.js";import{C as g}from"./cart-option-DFZ-9hvb.js";import{N as A,D as m,P as y,e as _,I as f}from"./product-value-encoder-BORaTGgH.js";import{f as E,p as I,i as L}from"./product-value-parser-BnI3aGPc.js";function he(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}function k(e){e.directive("collapse",t),t.inline=(s,{modifiers:i})=>{i.includes("min")&&(s._x_doShow=()=>{},s._x_doHide=()=>{})};function t(s,{modifiers:i}){let n=P(i,"duration",250)/1e3,l=P(i,"min",0),o=!i.includes("min");s._x_isShown||(s.style.height="".concat(l,"px")),!s._x_isShown&&o&&(s.hidden=!0),s._x_isShown||(s.style.overflow="hidden");let p=(c,D)=>{let h=e.setStyles(c,D);return D.height?()=>{}:h},u={transitionProperty:"height",transitionDuration:"".concat(n,"s"),transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};s._x_transition={in(c=()=>{},D=()=>{}){o&&(s.hidden=!1),o&&(s.style.display=null);let h=s.getBoundingClientRect().height;s.style.height="auto";let C=s.getBoundingClientRect().height;h===C&&(h=l),e.transition(s,e.setStyles,{during:u,start:{height:h+"px"},end:{height:C+"px"}},()=>s._x_isShown=!0,()=>{Math.abs(s.getBoundingClientRect().height-C)<1&&(s.style.overflow=null)})},out(c=()=>{},D=()=>{}){let h=s.getBoundingClientRect().height;e.transition(s,p,{during:u,start:{height:h+"px"},end:{height:l+"px"}},()=>s.style.overflow="hidden",()=>{s._x_isShown=!1,s.style.height=="".concat(l,"px")&&o&&(s.style.display="none",s.hidden=!0)})}}}}function P(e,t,s){if(e.indexOf(t)===-1)return s;const i=e[e.indexOf(t)+1];if(!i)return s;if(t==="duration"){let n=i.match(/([0-9]+)ms/);if(n)return n[1]}if(t==="min"){let n=i.match(/([0-9]+)px/);if(n)return n[1]}return i}var T=k;const F={items:{},add(e,t){this.items[t]!==e&&(this.items[t]=e,this.triggerLegacyFormChange())},getByName(e){return this.items?this.items[e]:void 0},update(e,t){this.items[t]!==e&&(this.items[t]=e,this.triggerLegacyFormChange())},remove(e){this.items[e]&&(delete this.items[e],this.triggerLegacyFormChange())},count(){return Object.values(this.items).length},triggerLegacyFormChange(){window.dispatchEvent(new CustomEvent("cart-items-trigger-form-update")),window.handleCartStateChange&&Alpine.nextTick(window.handleCartStateChange)}},N={options:[],name:A.Product,hasUserInteractedWithOptions:!1,set shouldPersist(e){sessionStorage.setItem("cartOptions_shouldPersist",JSON.stringify(e)),e&&this.savePersistedOptions()},get shouldPersist(){return JSON.parse(sessionStorage.getItem("cartOptions_shouldPersist"))},init(){this.loadPersistedOptions()},update(e,t=!0,s=this.name){this.options=[],this.name=s,this.options=e.map(i=>i instanceof g?i:new g(i)),t&&this.updateCartItemsStoreBasedOnSelectedOption(),this.shouldPersist&&this.savePersistedOptions()},updateWithPersistedSelectedIndex(e){let t=this.getSelectedIndex(),s=e.length-1;t>s&&(t=s),this.update(e,!1),this.setSelectedWithIndex(t)},setSelectedWithIndex(e){this.hasUserInteractedWithOptions=!0,this.options.map((t,s)=>(t.checked=parseInt(e)===s,t)),this.updateCartItemsStoreBasedOnSelectedOption(),this.savePersistedOptions()},getSelected__cartOptions(){return this.options.find(e=>e.checked===!0)||null},getSelectedIndex(){const e=Object.keys(this.options).find(t=>this.options[t].checked===!0);return e?parseInt(e):null},updateCartItemsStoreBasedOnSelectedOption(){const e=this.getSelected__cartOptions();e&&r.store("cartItems").update(e.id,this.name)},addToCartItems(){this.updateCartItemsStoreBasedOnSelectedOption()},removeFromCartItems(){r.store("cartItems").remove(this.name)},savePersistedOptions(){this.shouldPersist&&sessionStorage.setItem("cartOptions_options",JSON.stringify(this.options))},loadPersistedOptions(){const e=JSON.parse(sessionStorage.getItem("cartOptions_options"));this.shouldPersist&&e&&(this.options=e,this.updateCartItemsStoreBasedOnSelectedOption())}},d={Default:"default",BoxmeTh:"boxme-th",BoxmeVn:"boxme-vn",DapsidesLead:"dapsides-lead",Dapsides:"dapsides",DirLogisticsPt:"dirlogistics-pt",DirLogisticsAe:"dirlogistics-ae",Express2660Pt:"express2660-pt",Payo:"payo",Shorages:"shorages",ShoragesAe:"shorages-ae"},B={events:{},countries:[],_country:"",get country(){return this._country},set country(e){const t=this._country!==e;this._country=e,t&&this.triggerEvent("country")},state:null,streetAddress:null,streetAddressWithoutHouseNumber:null,houseNumber:null,zip:null,city:null,area:null,hideDeliveryDetails:!1,showStreetAndHouseNumberJoint:!0,on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},triggerEvent(e){this.events[e]&&this.events[e].forEach(t=>t())},getTemplateName(){var t;const e={payo:{default:d.Payo},dapsides:{default:d.Dapsides},shorages:{AE:d.ShoragesAe,default:d.Shorages},dir_logistics:{PT:d.DirLogisticsPt,AE:d.DirLogisticsAe,default:d.Default},boxme:{TH:d.BoxmeTh,VN:d.BoxmeVn,default:d.Default},express_2660:{PT:d.Express2660Pt,default:d.Default}};return e[(t=Alpine.store("cartPaymentOptions").selectedOption)==null?void 0:t.name]&&(e[Alpine.store("cartPaymentOptions").selectedOption.name][Alpine.store("cartDeliveryDetails").country]||e[Alpine.store("cartPaymentOptions").selectedOption.name].default)||d.Default},setDefaultStreetAddressTemplate(){this.showStreetAndHouseNumberJoint=!0},setStreetAndHouseNumberToBeDisplayedSeparately(){this.showStreetAndHouseNumberJoint=!1},disableAllInputs(){Object.values(m).forEach(e=>this.disableInput(e))},enableAllInputs(){Object.values(m).forEach(e=>this.enableInput(e))},disableInput(e){window.dispatchEvent(new CustomEvent("set-cart-input-disabled",{detail:{name:e,value:!0}}))},enableInput(e){window.dispatchEvent(new CustomEvent("set-cart-input-disabled",{detail:{name:e,value:!1}}))},setInputRequired(e){window.dispatchEvent(new CustomEvent("set-cart-input-required",{detail:{name:e,value:!0}}))},setInputNonRequired(e){window.dispatchEvent(new CustomEvent("set-cart-input-required",{detail:{name:e,value:!1}}))},setInputOptions(e,t){window.dispatchEvent(new CustomEvent("set-cart-input-options",{detail:{name:e,options:t}}))},setInputType(e,t){window.dispatchEvent(new CustomEvent("set-cart-input-type",{detail:{name:e,type:t}}))}},G={options:[],minStandardDeliveryDays:null,maxStandardDeliveryDays:null,minExpressDeliveryDays:null,maxExpressDeliveryDays:null,showExpressDelivery:!1,showExpressDeliveryForCodOnly:!1,showDeliveryDaysInDeliveryOptions:!1,init(){r.effect(()=>{var e;r.store("cartDeliveryDetails").country,(e=r.store("cartPaymentOptions"))==null||e.selectedOption,this.selectFirstDisplayedOptionIfNoOptionIsSelected()})},add(e){this.options.push(e),this.selectFirstDisplayedOptionIfNoOptionIsSelected()},update(e,t){this.options=this.options.map(s=>{if(s.data.productId===e){const i=s.data.checked;return s.data=new g(t),s.data.checked=i,s}return s}),this.updateCartItemsStoreBasedOnSelectedDeliveryOption()},select(e){this.options.map(t=>(t.data.checked&&t.data.productId!==e&&t.destroyedCallback(),t.data.checked=t.data.productId===e,t.data.checked&&t.initCallback(),t)),this.updateCartItemsStoreBasedOnSelectedDeliveryOption()},get__cartDeliveryOptions(e){return this.options.find(t=>t.data.productId===e)},getSelected__cartDeliveryOptions(){return this.options.find(e=>e.data.checked===!0)||null},getDisplayedOptions__cartDeliveryOptions(){return this.options.filter(e=>e.show())},isSelectedParcelLocker(){var e;return(e=this.getSelected__cartDeliveryOptions())==null?void 0:e.isParcelLocker},updateCartItemsStoreBasedOnSelectedDeliveryOption(){const e=this.getSelected__cartDeliveryOptions();e&&(e.data.isFree()?this.removeFromCartItems():r.store("cartItems").update(e.data.id,A.Delivery))},selectFirstDisplayedOptionIfNoOptionIsSelected(){var e;if(!((e=this.getSelected__cartDeliveryOptions())!=null&&e.show())){const t=this.options.find(s=>s.show()&&![y.InpostParcelDelivery,y.DirlLogisticsParcelDelivery,y.GlsParcelDelivery,y.AustraliaPostParcelDelivery].includes(s.data.productId));t&&this.select(t.data.productId)}},addToCartItems(){r.store("cartItems").add(this.getSelected__cartDeliveryOptions().data.id,A.Delivery)},removeFromCartItems(){r.store("cartItems").remove(A.Delivery)},repositionLeft(){window.dispatchEvent(new CustomEvent("delivery-options-reposition-left"))},repositionRight(){window.dispatchEvent(new CustomEvent("delivery-options-reposition-right"))},hideDomElement(){window.dispatchEvent(new CustomEvent("delivery-options-hide"))},showDomElement(){window.dispatchEvent(new CustomEvent("delivery-options-show"))}},M={parcelLockerId:null,parcelLockerObject:null,showSelectionMap:!1,locations:[],centerLat:null,centerLng:null,zoom:5,onSelectCallback(){},reset(){this.parcelLockerId=null,this.parcelLockerObject=null,this.centerLat=null,this.centerLng=null,this.zoom=5}},R={loading:!1,startLoading(){this.loading=!0},stopLoading(){this.loading=!1},isLoading(){return this.loading}},V={text:"",defaultText:"",codText:"",setDefaultText(){this.text=this.defaultText},setCodText(){this.text=this.codText}},q={showOptionsSelection:!0,selectedOption:null,options:[],unavailableOptions:[],codGateways:[],addOption(e){this.options.push(e)},clearOptions(){this.options=[]},addUnavailableOption(e){this.unavailableOptions.push(e)},clearUnavailableOptions(){this.unavailableOptions=[]},showOption(e){return this.getAvailableOptions().includes(e)},isSelected(e){var t;return((t=this.selectedOption)==null?void 0:t.name)===e},hideAllOptions(){this.showOptionsSelection=!1},isCodOptionDisplayed(){var e,t;return this.options.filter(s=>this.codGateways.includes(s)).length>0||((t=(e=this.selectedOption)==null?void 0:e.meta)==null?void 0:t.cod)},getDisplayedCodOption(){return this.options.find(e=>this.codGateways.includes(e))},getAvailableOptions(){return this.options.filter(e=>!this.unavailableOptions.includes(e))}},Q={errorRecommendationMessage:null,errorType:null,show(){return!!this.errorType},hide(){this.errorRecommendationMessage=null,this.errorType=null}},z={count:0},H={currency:null,locale:null},j={options:[],update(e){this.options=e.map(t=>t.map(s=>s instanceof g?s:new g(s)))},selectOption(e){Alpine.store("cartOptions").updateWithPersistedSelectedIndex(this.options[e])}},W={canCouponBeAppliedToOption:!0,coupon:[],gifts:[],pricingList:[]};function J(e){return e.options&&e.options.length>0&&(Alpine.store("cartOptions").update(e.options),document.dispatchEvent(new Event("cartOptionsInitialized"))),e.country&&e.country!=="XX"&&(Alpine.store("cartDeliveryDetails").country=e.country),e.countries&&(Alpine.store("cartDeliveryDetails").countries=e.countries),e.currency&&(Alpine.store("cartSettings").currency=e.currency),e.locale&&(Alpine.store("cartSettings").locale=e.locale),Alpine.store("cartDeliveryOptions").showExpressDeliveryForCodOnly=e.showExpressDeliveryForCodOnly,Alpine.store("cartDeliveryOptions").showExpressDelivery=e.showExpressDelivery,Alpine.store("cartDeliveryOptions").showDeliveryDaysInDeliveryOptions=e.showDeliveryDaysInDeliveryOptions,Alpine.store("cartPaymentOptions").codGateways=e.codGateways,{hideCodSelection__commonOrder:!1,hideContentForCod__commonOrder:e.hideContentForCod}}class v{constructor(t){this.data=new g(t.option,!0),this.showForCountries=t.showForCountries||null,this.isParcelLocker=t.isParcelLocker||!1,this.initCallback=t.initCallback||(()=>{}),this.destroyedCallback=t.destroyedCallback||(()=>{}),this.show=t.show||(()=>{let s=!0;return this.showForCountries&&(s=this.showForCountries.includes(Alpine.store("cartDeliveryDetails").country)),s})}}function w(e,t,s=null){return{init:()=>{Alpine.store("cartDeliveryOptions").add(new v({option:t,showForCountries:s}))},option__deliveryOption:()=>Alpine.store("cartDeliveryOptions").get__cartDeliveryOptions(e).data,show:()=>Alpine.store("cartDeliveryOptions").get__cartDeliveryOptions(e).show(),getPrice:function(){if(!Alpine.store("cartInstallments").count)return this.option__deliveryOption().totalPriceFormatted;const i=Alpine.store("cartInstallments").count,n=E(parseFloat(this.option__deliveryOption().totalPrice)/i,Alpine.store("cartSettings").currency,Alpine.store("cartSettings").locale);return Alpine.store("cartInstallments").count===1?n:"".concat(i," x ").concat(n)}}}function U(e){let t=e===1;return{hide:!1,show:()=>{const s=Alpine.store("cartDeliveryOptions").getDisplayedOptions__cartDeliveryOptions();return!(s.length===0||s.length===1&&s[0].data.isFree()&&s[0].data.productId===y.StandardDelivery&&!t)},repositionLeft:()=>{if(document.querySelector("[data-avoid-reposition-delivery-options]"))return;const s=document.querySelector("#delivery-options-left-placeholder");s&&s.appendChild(this.$el)},repositionRight:()=>{if(document.querySelector("[data-avoid-reposition-delivery-options]"))return;const s=document.querySelector("#delivery-options-right-placeholder");s&&s.appendChild(this.$el)}}}function X(){return{show__deliveryDetails:()=>!Alpine.store("cartDeliveryDetails").hideDeliveryDetails,showStreetAndHouseNumberJoint__deliveryDetails:()=>Alpine.store("cartDeliveryDetails").showStreetAndHouseNumberJoint}}function K(e,t){const s=y.InpostParcelDelivery;return{...new w(s,t),init:()=>{Alpine.store("cartDeliveryOptions").add(new v({option:t,showForCountries:e,isParcelLocker:!0,destroyedCallback:()=>{Alpine.store("cartDeliveryDetails").streetAddress=null,Alpine.store("cartDeliveryDetails").zip=null,Alpine.store("cartDeliveryDetails").hideDeliveryDetails=!1,Alpine.store("cartParcelLocker").parcelLockerId=null},initCallback:()=>{Alpine.store("cartDeliveryDetails").hideDeliveryDetails=!0}}))}}}function Z(e,t){const s=y.DirlLogisticsParcelDelivery;return{...new w(s,t),init:()=>{Alpine.store("cartDeliveryOptions").add(new v({option:t,showForCountries:e,isParcelLocker:!0,destroyedCallback:()=>{Alpine.store("cartDeliveryDetails").streetAddress=null,Alpine.store("cartDeliveryDetails").zip=null,Alpine.store("cartDeliveryDetails").hideDeliveryDetails=!1,Alpine.store("cartParcelLocker").parcelLockerId=null},initCallback:()=>{Alpine.store("cartDeliveryDetails").hideDeliveryDetails=!0}}))}}}function Y(e){const t=y.GlsParcelDelivery,s={FR:{zoom:5,centerLat:47.081,centerLng:2.3988}};return{...new w(t,e),init:()=>{Alpine.store("cartDeliveryOptions").add(new v({option:e,showForCountries:["FR"],isParcelLocker:!0,destroyedCallback:()=>{Alpine.store("cartParcelLocker").reset(),Alpine.store("cartDeliveryDetails").hideDeliveryDetails=!1,Alpine.store("cartDeliveryDetails").streetAddress=null,Alpine.store("cartDeliveryDetails").zip=null,Alpine.store("cartDeliveryDetails").setInputRequired("state")},initCallback:()=>{Alpine.store("cartDeliveryDetails").setInputNonRequired("state"),Alpine.store("cartDeliveryDetails").state=null,this.$nextTick(()=>{Alpine.store("cartDeliveryDetails").hideDeliveryDetails=!0})}}))},click:()=>{Alpine.store("cartLoader").startLoading();const i=s[Alpine.store("cartDeliveryDetails").country];Alpine.store("cartParcelLocker").zoom=i.zoom,Alpine.store("cartParcelLocker").centerLat=i.centerLat,Alpine.store("cartParcelLocker").centerLng=i.centerLng,Alpine.store("cartParcelLocker").showSelectionMap=!0,Alpine.store("cartParcelLocker").onSelectCallback=function(){const n=Alpine.store("cartParcelLocker").parcelLockerObject.address;Alpine.store("cartDeliveryOptions").select(t),Alpine.store("cartDeliveryDetails").streetAddress=/\d/.test(n)?n:n+" 0000",Alpine.store("cartDeliveryDetails").zip=Alpine.store("cartParcelLocker").parcelLockerObject.postcode,Alpine.store("cartDeliveryDetails").city=Alpine.store("cartParcelLocker").parcelLockerObject.city}}}}function ee(e,t,s,i,n,l,o,p){const u=y.AustraliaPostParcelDelivery;let c=!1,D=!1,h=null;function C(a){Alpine.store("cartDeliveryDetails").state=a.address.state,Alpine.store("cartDeliveryDetails").city=a.address.city,Alpine.store("cartDeliveryDetails").streetAddress=a.address.street+" "+a.address.street2,Alpine.store("cartDeliveryDetails").zip=a.address.postCode,Alpine.store("cartParcelLocker").parcelLockerId=a.companyStoreId}function S(){try{LocationFinder.init({root:"australia-post-widget",apiKey:i,apiSecret:n,googleApiKey:l,emailAddress:o,merchantId:p,callback:function(a){(!a.address.state||!a.address.city||!a.address.street||!a.address.street2||!a.address.postCode)&&window.Sentry&&window.Sentry.captureException("Australia post missing address ".concat(JSON.stringify(a.address))),C(a),h=a}}).then(()=>Alpine.store("cartLoader").stopLoading()),D=!0}catch(a){window.Sentry&&window.Sentry.captureException("Location Finder Library not available")}}function b(){if(c){h?C(h):(h=null,S());return}Alpine.store("cartLoader").startLoading();const a=document.createElement("script");a.src=s,a.async=!0,a.onload=()=>{c=!0,S()},document.head.appendChild(a)}return{isParcelLocker:!0,...new w(u,t),init:()=>{Alpine.store("cartDeliveryOptions").add(new v({option:t,showForCountries:e,isParcelLocker:!0,destroyedCallback:()=>{Alpine.store("cartDeliveryDetails").streetAddress=null,Alpine.store("cartDeliveryDetails").zip=null,Alpine.store("cartDeliveryDetails").hideDeliveryDetails=!1,Alpine.store("cartParcelLocker").parcelLockerId=null},initCallback:()=>{Alpine.store("cartDeliveryDetails").hideDeliveryDetails=!0,b()}})),Alpine.effect(()=>{var a;(a=Alpine.store("cartDeliveryOptions").get__cartDeliveryOptions(u))!=null&&a.show()||(D=!1)})},showWidget:()=>{var a;return((a=Alpine.store("cartDeliveryOptions").getSelected__cartDeliveryOptions())==null?void 0:a.data.productId)===u}}}function te(e,t,s,i,n,l){return{maxQuantity:10,minQuantity:1,selectedStyle:e,selectedColor:t,lastSelectedColor:t,colorSlugList:s,labelList:i,styleList:n,attributesList:l,selectedQuantity:1,options:[],init(){Alpine.store("cartOptions").removeFromCartItems(),this.$watch("selectedQuantity",()=>{this.selectedQuantity=this.selectedQuantity>this.maxQuantity?this.maxQuantity:this.selectedQuantity,this.selectedQuantity=this.selectedQuantity<this.minQuantity?this.minQuantity:this.selectedQuantity}),this.$watch("selectedColor",()=>{this.selectedColor!==null&&(this.lastSelectedColor=this.selectedColor)}),this.$watch("options",()=>{this.options.forEach(o=>{Alpine.store("cartItems").update(_(o.option),"product["+o.option.id+"]")})})},outOfStock(){if(this.selectedStyle&&I(this.selectedStyle).id.startsWith("coverlastic-xl-sofa-")&&["#252525","#8A8C91"].includes(this.selectedColor))return!0},disabled(){return this.outOfStock()?!0:!(this.selectedStyle&&this.selectedColor)},showPreviewWithColor(o){return this.lastSelectedColor===o},add(){if(this.disabled())return;const{label:o,parsedOption:p}=this.formatOptionValue(this.selectedStyle,this.selectedQuantity,this.selectedColor);this.options=this.options.filter(u=>u.color!==this.selectedColor&&u.style!==this.selectedStyle),this.options.push({color:this.selectedColor,style:this.selectedStyle,quantity:this.selectedQuantity,option:p,label:o}),this.selectedQuantity=this.minQuantity,this.selectedStyle=null,this.selectedColor=null},remove(o){Alpine.store("cartItems").remove("product["+o.option.id+"]"),this.options=this.options.filter(function(p){return!(o.color===p.color&&o.style===p.style)})},increase(o){o.quantity=o.quantity===this.maxQuantity?this.maxQuantity:o.quantity+1;const{parsedOption:p}=this.formatOptionValue(o.style,o.quantity,o.color);o.option=p},decrease(o){o.quantity=o.quantity===this.minQuantity?this.minQuantity:o.quantity-1;const{parsedOption:p}=this.formatOptionValue(o.style,o.quantity,o.color);o.option=p},formatOptionValue(o,p,u){const c=I(o,0),D=this.styleList[c.id];return c.id=c.id.replace("-sand","-"+this.colorSlugList[u]),c.price=(c.price*p).toFixed(2),c.name=this.labelList[c.id],c.options=[u],c.oldPrice=(c.oldPrice*p).toFixed(2),c.quantity=p,{label:D,parsedOption:c}}}}function O(e){return{type:f.Input,isRequired:!0,isDisabled:!1,show:!0,options:null,choicesElement:null,placeholder:e,init(){Alpine.effect(()=>{Alpine.store("cartDeliveryDetails")[this.storeName],this.choicesElement&&this.choicesElement.setChoiceByValue(Alpine.store("cartDeliveryDetails")[this.storeName]),this.fixValueForSelect()})},isTypeInput(){return this.type===f.Input},isTypeChoices(){return this.type===f.Choices},isTypeSelect(){return this.type===f.Select},getOptions(){return this.options?this.options:[]},getChoicesOptions(){const t=[];t.push({value:"",label:e,placeholder:!0,selected:!0});for(const[s,i]of Object.entries(this.options?this.options:{}))t.push({value:s,label:i});return t},async createChoicesElement(){if(await this.$nextTick(),!(this.type!==f.Choices||!this.$refs.choicesElement)){if(this.choicesElement){this.choicesElement.clearChoices(),this.choicesElement.setChoices(this.getChoicesOptions());return}this.choicesElement=new Choices(this.$refs.choicesElement,{choices:this.getChoicesOptions(),itemSelectText:"",allowHTML:!1,classNames:{containerInner:"choices__inner--custom cart-input p",listSingle:""}}),this.choicesElement.passedElement.element.addEventListener("change",t=>{Alpine.store("cartDeliveryDetails")[this.storeName]=t.detail.value;var s=document.getElementById(this.name+"-error");s&&(s.style.display="none")},!1)}},fixValueForSelect(){this.type===f.Select&&this.options&&!(Alpine.store("cartDeliveryDetails")[this.storeName]in this.options)&&(Alpine.store("cartDeliveryDetails")[this.storeName]=null)},destroyChoicesElement(){this.choicesElement&&(this.choicesElement.destroy(),this.choicesElement=null)},handleRequiredChange(t){t.detail.name===this.name&&(this.isRequired=t.detail.value)},handleDisabledChange(t){t.detail.name===this.name&&(this.isDisabled=t.detail.value,this.isTypeChoices()&&this.choicesElement&&(this.isDisabled?this.choicesElement.disable():this.choicesElement.enable()))},handleTypeChange(t){t.detail.name===this.name&&(this.type=t.detail.type,this.fixValueForSelect(),this.createChoicesElement())},handleOptionsChange(t){t.detail.name===this.name&&this.options!==t.detail.options&&(this.options=t.detail.options,this.fixValueForSelect(),this.createChoicesElement())}}}function se(e){return{...O(e),name:m.Area,storeName:"area"}}function ie(e){return{...O(e),name:m.City,storeName:"city"}}function re(e){return{...O(e),name:m.HouseNumber,storeName:"houseNumber"}}function oe(e){return{...O(e),name:m.State,storeName:"state"}}function ne(e,t){const s=O(e);return{...s,name:m.StreetAddress,storeName:"streetAddress",autocomplete:null,init(){s.init(),this.insertGoogleMapsScriptTag()},insertGoogleMapsScriptTag(){if(!t)return;window.initGoogleMapsAutocomplete=this.initGoogleMapsAutocomplete.bind(this);const i=document.createElement("script");i.async=!0,i.src="https://maps.googleapis.com/maps/api/js?key=".concat(t,"&loading=async&libraries=places&callback=initGoogleMapsAutocomplete&solution_channel=GMP_guides_checkout_v1_a"),document.body.appendChild(i)},initGoogleMapsAutocomplete(){const i={fields:["address_components","name"],types:["address"],componentRestrictions:{country:this.getCountryListToRestrictAddressIn()}};this.autocomplete=new google.maps.places.Autocomplete(this.$refs.input,i),this.autocomplete.addListener("place_changed",this.autocompleteDeliveryAddress.bind(this)),Alpine.effect(()=>{this.autocomplete.setComponentRestrictions({country:this.getCountryListToRestrictAddressIn()})})},autocompleteDeliveryAddress(){const i=this.autocomplete.getPlace();let n="";if(Alpine.store("cartDeliveryDetails").streetAddress=null,Alpine.store("cartDeliveryDetails").streetAddress=i.name,!!i.address_components){for(const l of i.address_components)switch(l.types[0]){case"locality":{Alpine.store("cartDeliveryDetails").city=l.long_name;break}case"postal_code":{n="".concat(l.long_name).concat(n);break}case"postal_code_suffix":{n="".concat(n,"-").concat(l.long_name);break}case"administrative_area_level_1":{Alpine.store("cartDeliveryDetails").state=l.long_name,Alpine.nextTick(()=>{Alpine.store("cartDeliveryDetails").state||(Alpine.store("cartDeliveryDetails").state=l.short_name)});break}case"country":Alpine.store("cartDeliveryDetails").country=l.short_name;break}Alpine.store("cartDeliveryDetails").zip=n}},getCountryListToRestrictAddressIn(){return Alpine.store("cartDeliveryDetails").country&&Alpine.store("cartDeliveryDetails").country!=="XX"?Alpine.store("cartDeliveryDetails").country:[]}}}function ae(e){return{...O(e),name:m.Street,storeName:"street"}}function le(e){return{...O(e),name:m.Zip,storeName:"zip"}}function ce(e){return{paymentTypesGatewayMap:{card:{id:"card",processor:"ixo_pay",enabled:!0},paypal:{id:"paypal",processor:"paypal",enabled:!0},applePay:{id:"applePay",processor:"ixo_pay_apple_pay",enabled:e.isApplePayEnabled},googlePay:{id:"googlePay",processor:"ixo_pay_google_pay",enabled:e.isGooglePayEnabled},klarna:{id:"klarna",processor:"klarna_payments",enabled:e.isKlarnaEnabled}},formStateControls:{paymentType:"card",tosRequired:e.tosRequired,isPaypalVaultEnabled:e.isPaypalVaultEnabled,showRenewalPricesModal:e.showRenewalPricesModal,tosChecked:!1,inputs:{nameOnCard:"",firstName:"",lastName:""}},init(){if(!this.formStateControls.isPaypalVaultEnabled){const t={[this.paymentTypesGatewayMap.card.id]:async()=>{await window.paymentsAPI.loadProcessor(this.paymentTypesGatewayMap.card.processor)},[this.paymentTypesGatewayMap.paypal.id]:async()=>{await window.paymentsAPI.loadProcessor(this.paymentTypesGatewayMap.paypal.processor)},[this.paymentTypesGatewayMap.klarna.id]:async()=>{await window.paymentsAPI.loadProcessor(this.paymentTypesGatewayMap.klarna.processor)},[this.paymentTypesGatewayMap.googlePay.id]:()=>new Promise(s=>{this.toggleExpressButtonVisibility(this.paymentTypesGatewayMap.applePay.processor,!1),this.toggleExpressButtonVisibility(this.paymentTypesGatewayMap.googlePay.processor,!0),s()}),[this.paymentTypesGatewayMap.applePay.id]:()=>new Promise(s=>{this.toggleExpressButtonVisibility(this.paymentTypesGatewayMap.googlePay.processor,!1),this.toggleExpressButtonVisibility(this.paymentTypesGatewayMap.applePay.processor,!0),s()})};this.$watch("formStateControls.paymentType",(function(s){if(this.clearValidationDom(),!t[s]){console.error("Invalid payment type:",s);return}const i=async()=>{this.togglePaymentOptionLabels(),$(".order-form-loader").addClass("order-form-loading"),window.paymentsAPI?(window.paymentsAPI.destroyCurrentActiveProcessor(),setTimeout(async()=>{await t[s]().finally(()=>{this.togglePaymentOptionLabels(),$(".order-form-loader").removeClass("order-form-loading")})})):setTimeout(i,100)};i()}).bind(this))}this.$watch("formStateControls.tosChecked",function(t){const s=document.getElementById("tosText"),i=s.getElementsByTagName("a");if(t){if(s.classList.remove("tw-text-danger"),i.length)for(const n of i)n.classList.remove("tw-text-danger"),n.classList.add("tw-text-primary")}else if(s.classList.add("tw-text-danger"),i.length)for(const n of i)n.classList.remove("tw-text-primary"),n.classList.add("tw-text-danger")}),this.paymentTypesGatewayMap.applePay.enabled=e.isApplePayEnabled&&L()},resolveNameOnCard(){this.formStateControls.inputs.firstName=this.formStateControls.inputs.nameOnCard.trim().split(" ")[0],this.formStateControls.inputs.lastName=this.formStateControls.inputs.nameOnCard.trim().split(" ").slice(1).join(" ")},setRedirectHookOnPaymentsApiLoad(){const t=setInterval(()=>{window.paymentsAPI&&(window.paymentsAPI.setRedirectHook(function(s){window.parent.postMessage({type:"formSubmitted",rurl:s},"*")}),clearInterval(t))},100)},clearValidationDom(){const t=this.$refs["js-disabled-submit-message"],s=document.querySelector(".error-summary");if(t&&(t.style.display="none"),s)for(;s.firstChild;)s.removeChild(s.firstChild)},toggleExpressButtonVisibility(t,s){const i=document.getElementById("payment-method-express-"+t);i&&(i.style.display=s?"block":"none")},togglePaymentOptionLabels(){document.querySelectorAll("label.order-label").forEach(s=>{s.style.pointerEvents=s.style.pointerEvents==="none"?"auto":"none"})}}}class pe{constructor(t){this.codGateways=t.codGateways,this.hideContentForCod=t.hideContentForCod,this.options=t.options,this.country=t.country,this.countries=t.countries,this.currency=t.currency,this.locale=t.locale,this.showExpressDeliveryForCodOnly=t.showExpressDeliveryForCodOnly,this.showExpressDelivery=t.showExpressDelivery,this.showDeliveryDaysInDeliveryOptions=t.showDeliveryDaysInDeliveryOptions}}function de(e){const t=y.StandardDelivery;return{...new w(t,e),init:()=>{Alpine.store("cartDeliveryOptions").add(new v({option:e,showForCountries:null}))}}}function ue(e){const t=y.ExpressDelivery;let s=!0;return{...new w(t,e),init:()=>{Alpine.store("cartDeliveryOptions").add(new v({option:e,showForCountries:null,show:()=>{var l,o;const i=Alpine.store("cartDeliveryOptions").showExpressDeliveryForCodOnly&&((o=(l=Alpine.store("cartPaymentOptions").selectedOption)==null?void 0:l.meta)==null?void 0:o.cod),n=Alpine.store("cartDeliveryOptions").showExpressDelivery||i;return n&i&&s&&(Alpine.store("cartDeliveryOptions").select(t),s=!1),n}}))}}}window.ecommerce={};window.ecommerce.Cart=pe;window.ecommerce.CartDeliveryOption=v;window.ecommerce.CartOption=g;window.ecommerce.InputTypes=f;window.ecommerce.InputNames=m;window.ecommerce.DeliveryDetailsTemplates=d;window.Alpine=r;r.plugin(T);r.data("commonOrder",J);r.data("deliveryDetails",X);r.data("deliveryOption",w);r.data("deliveryOptions",U);r.data("standardDeliveryOption",de);r.data("expressDeliveryOption",ue);r.data("inpostDeliveryOption",K);r.data("dirlDeliveryOption",Z);r.data("glsDeliveryOption",Y);r.data("australiaPostDeliveryOption",ee);r.data("coverlasticOptions",te);r.data("areaInput",se);r.data("cityInput",ie);r.data("houseNumberInput",re);r.data("stateInput",oe);r.data("streetAddressInput",ne);r.data("streetInput",ae);r.data("zipInput",le);r.data("digitalForm",ce);r.store("cartItems",F);r.store("cartOptions",N);r.store("cartDeliveryDetails",B);r.store("cartDeliveryOptions",G);r.store("cartParcelLocker",M);r.store("cartLoader",R);r.store("cartButton",V);r.store("cartPaymentOptions",q);r.store("cartPaymentDeclinedPopup",Q);r.store("cartInstallments",z);r.store("cartSettings",H);r.store("cartProductTypeOptions",j);r.store("cartCouponStore",W);r.directive("destroy",(e,{expression:t},{evaluate:s})=>{const i=new MutationObserver(n=>{for(let l of n)l.removedNodes.length&&l.removedNodes.forEach(o=>{(o.contains(e)||o===e)&&s(t)})});i.observe(document.body,{childList:!0,subtree:!0}),e._x_cleanupDestroy=()=>{i.disconnect()}});x.start();export{he as __vite_legacy_guard};
